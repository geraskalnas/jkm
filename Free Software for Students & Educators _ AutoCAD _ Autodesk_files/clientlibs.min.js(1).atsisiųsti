window.adsk=window.adsk||{};
adsk.educationDownload=adsk.educationDownload||{};
adsk.webSDK=adsk.webSDK||{};
adsk.educationDownload=function(){var a=false;
adsk.webSDK.loadSdk=function(b){if(!a){adsk.webSDK.addScript(adsk.webSDK.jquery,function(){adsk.webSDK.addStyle(adsk.webSDK.css);
adsk.webSDK.addScript(adsk.webSDK.script,function(){$("#thankYouDlg").dialog("option","position",["center",100]);
$("#eula").dialog("option","position",["center",100]);
$("#helptodecide").dialog("option","position",["center",100]);
a=true;
b()
})
})
}else{b()
}};
adsk.webSDK.createEsdArg=function(b){if(!b.browserDownloadUris||b.browserDownloadUris.length<=0){return undefined
}return b.browserDownloadUris
};
adsk.webSDK.addScript=function(b,c){jQuery.ajax({url:b,cache:true,dataType:"script",success:c})
};
adsk.webSDK.addStyle=function(b){var c=document.createElement("link");
c.rel="stylesheet";
c.type="text/css";
c.href=b;
document.getElementsByTagName("head")[0].appendChild(c)
};
adsk.webSDK.browserDownload=function(b){for(var c=0;
c<b.length;
++c){window.open(b[c],"_blank")
}}
}();
var adsk=adsk||{};
adsk.s=adsk.s||{};
adsk.webSDK=adsk.webSDK||{};
define("adsk.educationDropdown",["jquery","adsk.data.pubsubWrapper","adsk.externalLibraries","global.digitalData","lightbox"],function(f,j,d,h,b){function e(n,k){this.sso=new d.Sso({mode:d.Sso.modes.EDU,locale:document.documentElement.lang,autoInit:false});
this.stepOne=f(".educational-login");
this.stepTwo=f(".educational-dropdown");
this.stepThree=f(".educational-button");
this.signInButton=this.stepOne.find(".sign-in-btn");
this.createAccountButton=this.stepOne.find(".create-account-btn");
this.logOutButton=this.stepOne.find(".edu-login-logout");
this.myAccountButton=this.stepOne.find(".edu-login-account");
this.versionSelector=this.stepTwo.find(".edu-dl-v");
this.versionCheck=this.stepTwo.find(".edu-dropdown-check-v");
this.languageSelector=this.stepTwo.find(".edu-dl-la");
this.languageCheck=this.stepTwo.find(".edu-dropdown-check-la");
this.osSelector=this.stepTwo.find(".edu-dl-os");
this.osCheck=this.stepTwo.find(".edu-dropdown-check-os");
this.licenseSelector=this.stepTwo.find(".edu-dl-s");
this.licenseCheck=this.stepTwo.find(".edu-dropdown-check-s");
this.loadingSpinner=this.stepTwo.find(".loading-spinner");
this.serialNumberLabel=this.stepTwo.find(".edu-dropdown-serial-number");
this.productKeyLabel=this.stepTwo.find(".edu-dropdown-product-key");
this.fileSizeLabel=this.stepTwo.find(".edu-dropdown-file-size");
this.productSeatsLabel=this.stepTwo.find(".edu-dropdown-seats");
this.compareLink=this.stepTwo.find(".edu-dropdown-compare-link");
this.entitleLink=this.stepTwo.find(".edu-dropdown-entitle-link");
this.entitleBox=this.stepTwo.find(".edu-dropdown-entitle");
this.toggleShowButton=f(".educational-button .edu-button-toggle-show");
this.disabledButton=f(".educational-button .sdk-button-disabled");
this.disabledButtonSdkText=f(".educational-button #disabled-anchor-text");
this.enabledButton=f(".educational-button .sdk-button-enabled");
this.versionSelector.attr("disabled",true);
this.languageSelector.attr("disabled",true);
this.osSelector.attr("disabled",true);
this.licenseSelector.attr("disabled",true);
this.licenseSelector.on("change",f.proxy(this,"onLicenseChanged"));
this.versionSelector.on("change",f.proxy(this,"onVersionChanged"));
this.languageSelector.on("change",f.proxy(this,"onLanguageChanged"));
this.osSelector.on("change",f.proxy(this,"onOsChanged"));
this.signInButton.attr("href",this.sso.signIn());
this.createAccountButton.attr("href",this.sso.createAccount());
this.logOutButton.on("click",f.proxy(this,"onLogOutClicked"));
this.toggleShowButton.on("click",f.proxy(this,"onToggleClick"));
this.releases=n.releases||[];
this.i18n=n.i18n||{};
this.wiData=n.webInstallData||{};
this.adlmPath=n.adlmPath||"";
this.cloudAccessDownloadWithSN=n.cloudAccessDownloadWithSN;
this.isStepOneComplete=false;
this.enableMarketoIntegration=n.enableMarketoIntegration||false;
this.activityName=n.activityName||"";
this.marketoFormId=n.marketoFormId||"";
this.marketoInstanceId=n.marketoInstanceId||"";
this.marketoAPIEndpoint=n.marketoAPIEndpoint||"";
this.cloudAccessEnabled=n.cloudAccessEntitled||false;
this.cloudAccessProductSku=n.productSkuForCloudAccess||"";
this.cloudAccessProductName=n.productNameForCloudAccess||"";
this.cloudAccessProductKey=n.productKeyForCloudAccess||"";
this.cloudAccessButton=this.stepOne.find(".get-cloud-access-btn");
this.MULTI_SEAT_STANDALONE_LICENSE="mssa";
this.NETWORK_LICENSE="network";
this.STANDALONE_LICENSE="standalone";
this.PERSONAL_ENTITLEMENT="personal";
this.ENTITLEMENT="entitlement";
f(".get-cloud-access-btn").on("click",{thisobj:this},function(q){var p=q.data.thisobj;
p.checkCloudAccessEntitlement("register");
if(p.enableMarketoIntegration&&p.marketoAPIEndpoint.length>0){a(p.marketoAPIEndpoint,p.marketoFormId,p.marketoInstanceId,p.activityName,adsk.oxygen.userProfile)
}});
this.createEsdArg=adsk.webSDK.createEsdArg;
this.defaultLicense="standalone";
this.selectedLicense=this.defaultLicense;
this.isLicenseOptVisible=false;
e.instances.push(this);
var l="Install Now";
if(window.ADSKDLMResourceStrings&&this.i18n.sdkLocale&&ADSKDLMResourceStrings[this.i18n.sdkLocale]){l=ADSKDLMResourceStrings[this.i18n.sdkLocale].splitbtnInstallNow
}this.disabledButtonSdkText.append(l);
var m=this;
if(adsk.hasOwnProperty("clientContext")){this.clientContext=adsk.clientContext.getStore("edudownload");
this.clearClientContext();
this.clientContext.setProperty("selectedLicense",this.defaultLicense)
}if(location.hash.substr(0,7)==="#o2-err"){var o=location.hash.substr(1);
if(o==="o2-err-001"||o==="o2-err-002"||o==="o2-err-003"){this.onWebServicesError("Failure",o);
location.hash=""
}}this.clickCatcher=f(".educationClickHandler");
this.clickCatcher.click(function(p){m.sendEmailLink(p)
});
new k({redraw:function(q){var p="";
if(typeof CQ_Analytics.UserProfileMgr.data.isMobile!==undefined){p=CQ_Analytics.UserProfileMgr.data.isMobile
}m.clickCatcher.css("visibility",p?"visible":"hidden")
}});
this.setupSingleSignOn()
}e.prototype.setupSingleSignOn=function(){var k=(function(l){if(!!l){this.userProfile=l;
if(!l.edurole){this.setStepOneComplete(false)
}else{this.myAccountButton.attr("href",this.sso.showProfile());
this.setStepOneComplete(true)
}}else{this.userProfile={};
this.setStepOneComplete(false)
}}).bind(this);
j.subscribe(j.adskConstants.SSO_SIGNED_IN,function(m,l){k(l)
});
this.sso.init();
k(this.sso.isSignedIn())
};
e.prototype.sendEmailLink=function(r){var m=function(s){return encodeURIComponent(s).replace(/'/g,"%27").replace(/"/g,"%22")
};
if(r){r.preventDefault()
}var q=this.getReleaseData(this.selectedRelease,this.selectedLanguage,this.selectedOs);
var k=this.loadingSpinner.data("email-title");
var p=this.loadingSpinner.data("email-body");
var o=m(k.replace("${name}",q.displayName));
var l=m(p.replace("${name}",q.displayName).replace("${link}",window.location.href)).replace(/__/g,"%0D%0A%0D%0A");
var n="mailto:"+this.userProfile.email+"?subject="+o+"&body="+l;
window.location=n
};
e.analyticsCallback=undefined;
e.stepTwoAnalyticsCallback=undefined;
e.instances=[];
e.prototype.getLicenseTypeOptions=function(){var m;
var o={size:0,list:[]};
for(m=0;
m<this.releases.length;
++m){if(this.releases[m].hasOwnProperty("licenseTypes")){var k=this.releases[m];
for(var n in k.licenseTypes){var l=k.licenseTypes[n];
if(this.allowedType(l)&&o.list.indexOf(l)==-1){o.list.push(l);
o.size++
}}}}return o
};
e.prototype.getRelease=function(l){var k;
for(k=0;
k<this.releases.length;
++k){if(this.releases[k].name===l){return this.releases[k]
}}return undefined
};
e.prototype.getReleaseOptions=function(m){var l;
var k={size:0,name:[],key:[]};
for(l=0;
l<this.releases.length;
++l){if(this.releases[l].hasOwnProperty("licenseTypes")&&this.releases[l].licenseTypes.indexOf(m)>-1){k.name.push(this.releases[l].title);
k.key.push(this.releases[l].name);
k.size++
}}return k
};
e.prototype.getOsOptions=function(m,k){var l;
var n={size:0,key:[]};
if(k){for(l=0;
l<k.releases.length;
++l){if(n.key.indexOf(k.releases[l].operatingSystem)==-1){n.key.push(k.releases[l].operatingSystem);
n.size++
}}}return n
};
e.prototype.getLanguageOptions=function(k,m){var l;
var n={size:0,key:[]};
for(l=0;
l<k.releases.length;
++l){if(n.key.indexOf(k.releases[l].locale)==-1&&k.releases[l].operatingSystem==m){n.key.push(k.releases[l].locale);
n.size++
}}return n
};
e.prototype.getReleaseData=function(k,o,n){if(k){for(var l=0;
l<k.releases.length;
++l){var m=k.releases[l];
if(m.locale===o&&m.operatingSystem===n){return m
}}}return undefined
};
e.prototype.populateLicenseDropDown=function(){var m=this.getLicenseTypeOptions();
var k="";
if((m.size==1&&m.list[0]!=this.defaultLicense)||m.size>1){for(var l in m.list){k+='<option value="'+m.list[l]+'">';
k+=(this.i18n["license-"+m.list[l]]||m.list[l]);
k+="</option>"
}this.licenseSelector.html(f(k).sort(function(o,n){return o.text===n.text?0:o.text<n.text?-1:1
}));
this.licenseSelector.prepend('<option value="" selected="selected">'+(this.i18n["license-label"]||"License")+"</option>");
this.isLicenseOptVisible=true
}else{this.isLicenseOptVisible=false
}};
e.prototype.populateReleaseDropDown=function(m){var l=this.getReleaseOptions(this.selectedLicense);
var n="";
for(var k in l.name){n+='<option value="'+l.key[k]+'">';
n+=(l.name[k]);
n+="</option>"
}this.versionSelector.html(f(n).sort(function(p,o){return p.text===o.text?0:p.text<o.text?-1:1
}));
this.versionSelector.prepend('<option value="" selected="selected">'+(this.i18n["version-label"]||"Version")+"</option>");
if(l.size<1){this.versionSelector.attr("disabled",true)
}};
e.prototype.populateLanguageDropDown=function(k){var l=this.getLanguageOptions(k,this.selectedOs);
var n="";
for(var m in l.key){n+='<option value="'+l.key[m]+'">';
n+=(this.i18n["locale-"+l.key[m]]||l.key[m]);
n+="</option>"
}this.languageSelector.html(f(n).sort(function(p,o){return p.text===o.text?0:p.text<o.text?-1:1
}));
this.languageSelector.prepend('<option value="" selected="selected">'+(this.i18n["language-label"]||"Language")+"</option>")
};
e.prototype.populateOsDropDown=function(o,k){var m=this.getOsOptions(o,k);
var n='<option value="" selected="selected">'+(this.i18n["os-label"]||"Operating System")+"</option>";
for(var l in m.key){n+='<option value="'+m.key[l]+'">';
n+=this.i18n["os-"+m.key[l].toLowerCase()];
n+="</option>"
}this.osSelector.html(n)
};
e.prototype.setSelectedRelease=function(k){this.selectedRelease=this.getRelease(k);
this.osCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedOs");
this.osSelector.val("");
this.osSelector.attr("disabled",true);
this.languageCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedLanguage");
this.languageSelector.val("");
this.languageSelector.attr("disabled",true);
this.entitleLink.hide();
if(k===""){this.versionCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedRelease")
}else{this.versionCheck.css("visibility","visible");
this.clientContext.setProperty("selectedRelease",k);
this.osSelector.attr("disabled",this.selectedRelease===undefined);
this.languageSelector.attr("disabled",true);
this.populateOsDropDown(this.selectedLicense,this.selectedRelease);
if(this.selectedRelease.benefitsTitle!==undefined&&this.selectedRelease.benefitsLink!==undefined&&this.selectedLicense!=="standalone"){this.entitleLink.show();
this.entitleLink.attr("href",this.selectedRelease.benefitsLink.replace(/^[\/]?content\/autodesk\/[^\/]+\/[^\/]+\//i,"/"));
this.entitleLink.html(this.selectedRelease.benefitsTitle);
this.entitleBox.css("margin-top",(this.isInstitutional()&&this.isLicenseOptVisible)?"10px":"0")
}}this.setStepTwoComplete(false)
};
e.prototype.setSelectedLanguage=function(k){this.selectedLanguage=k;
if(k===""){this.languageCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedLanguage");
this.setStepTwoComplete(false)
}else{this.languageCheck.css("visibility","visible");
this.clientContext.setProperty("selectedLanguage",k);
this.setStepTwoComplete(true)
}};
e.prototype.setSelectedOs=function(k){this.selectedOs=k;
this.languageCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedLanguage");
this.languageSelector.val("");
if(k===""){this.osCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedOs");
this.languageSelector.attr("disabled",true)
}else{this.osCheck.css("visibility","visible");
this.clientContext.setProperty("selectedOs",k);
this.languageSelector.attr("disabled",false);
this.populateLanguageDropDown(this.selectedRelease)
}this.setStepTwoComplete(false)
};
e.prototype.setSelectedLicense=function(k){this.selectedLicense=k;
this.versionCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedRelease");
this.versionSelector.val("");
this.osCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedOs");
this.osSelector.val("");
this.osSelector.attr("disabled",true);
this.languageCheck.css("visibility","hidden");
this.clientContext.removeProperty("selectedLanguage");
this.languageSelector.val("");
this.languageSelector.attr("disabled",true);
this.entitleLink.hide();
if(k===""){this.licenseCheck.css("visibility","hidden");
this.clientContext.setProperty("selectedLicense",this.defaultLicense);
this.versionSelector.attr("disabled",true)
}else{this.licenseCheck.css("visibility","visible");
this.clientContext.setProperty("selectedLicense",k);
this.populateReleaseDropDown(this.selectedLicense);
this.enableVersionSelector()
}this.setStepTwoComplete(false)
};
e.prototype.setStepOneComplete=function(k){if(!k&&this.cloudAccessEnabled){f(".edu-cloudaccess-button-logged, .edu-cloudaccess-button-entitled").hide();
f(".edu-cloudaccess-button-unlogged").show()
}if(k&&this.isStepOneComplete){return
}else{if(k){adsk.s.ApplicationName="segment";
adsk.s.ApplicationStep="1";
f(".edu-login-unlogged, .edu-dropdown-unlogged").hide();
f(".edu-login-logged").show();
f(".edu-dropdown-logged").css("display","table");
this.populateLicenseDropDown();
if(this.isInstitutional()&&this.isLicenseOptVisible){this.versionSelector.attr("disabled",true);
this.licenseSelector.css("display","inline-block");
this.licenseSelector.attr("disabled",false);
this.compareLink.attr("href",this.compareLink.data("link"));
this.compareLink.show()
}else{if(this.isPersonal()){if(this.cloudAccessEnabled){this.checkCloudAccessEntitlement("check")
}else{this.populateReleaseDropDown(this.selectedLicense);
this.enableVersionSelector();
this.licenseSelector.hide();
this.licenseSelector.attr("disabled",true);
this.licenseCheck.hide()
}}}f(".edu-name-placeholder").html(this.userProfile.fullname);
this.isStepOneComplete=true
}else{this.versionSelector.val("");
this.versionSelector.attr("disabled",true);
this.languageSelector.attr("disabled",true);
this.osSelector.attr("disabled",true);
this.licenseSelector.attr("disabled",true);
this.versionCheck.css("visibility","hidden");
this.languageCheck.css("visibility","hidden");
this.osCheck.css("visibility","hidden");
this.licenseCheck.css("visibility","hidden");
f(".edu-login-unlogged, .edu-dropdown-unlogged").show();
f(".edu-login-logged, .edu-dropdown-logged").hide();
if(this.cloudAccessEnabled){f(".edu-cloudaccess-button-logged, .edu-cloudaccess-button-entitled").hide();
f(".edu-cloudaccess-button-unlogged").show()
}this.compareLink.hide();
this.entitleLink.hide();
this.isStepOneComplete=false;
this.setStepTwoComplete(false);
this.clearClientContext()
}}};
e.prototype.enableVersionSelector=function(){if(this.versionSelector[0]&&this.versionSelector[0].options&&this.versionSelector[0].options.length>1){this.versionSelector.attr("disabled",false)
}else{this.versionSelector.attr("disabled",true)
}};
e.prototype.onGetCloudAccessClicked=function(k){this.checkCloudAccessEntitlement("register");
k.preventDefault()
};
e.prototype.checkCloudAccessEntitlement=function(k){var l=this;
var m=document.documentElement.lang;
if(m.indexOf("-")>-1){m=m.replace("-","_")
}if(k!=="check"){try{analytics.context.changeContext({event:{eventType:"edu_product_cloud_access"},products:[{productKey:this.cloudAccessProductKey}]})
}catch(n){}}f.ajax("/services/adsk/c/oxygen/webservice",{dataType:"json",data:{productSKU:this.cloudAccessProductSku,locale:m,productName:this.cloudAccessProductName,productKey:this.cloudAccessProductKey,cloudEntitlement:k},error:function(p,o,q){l.onCloudAccessCheckComplete(k)
},timeout:30000,success:function(o){l.onCloudAccessSuccess(o,k)
},complete:function(){}})
};
e.prototype.onCloudAccessCheckComplete=function(k){if(k==="register"){f(".edu-cloudaccess-button-entitled, .edu-cloudaccess-button-unlogged").hide();
f(".edu-cloudaccess-button-logged").show()
}else{f(".edu-cloudaccess-button-unlogged, .edu-cloudaccess-button-entitled").hide();
f(".edu-cloudaccess-button-logged").show()
}};
e.prototype.onCloudAccessSuccess=function(l,k){if(l.state==="Sucess"){if(this.cloudAccessDownloadWithSN){if(typeof l.serialNumber!="undefined"&&l.serialNumber.length>0){f(".edu-cloudaccess-button-unlogged, .edu-cloudaccess-button-logged").hide();
f(".edu-cloudaccess-button-entitled").show();
f(document).trigger("adsk.ui.educationalDownload.userLogin");
this.clientContext.setProperty("cloudClicked",true)
}}else{f(".edu-cloudaccess-button-unlogged, .edu-cloudaccess-button-logged").hide();
f(".edu-cloudaccess-button-entitled").show();
f(".edu-cloud-access-download-link > a").attr("href",this.getRelease(this.cloudAccessProductName).releases[0].browserDownloadUris[0]).show();
this.clientContext.setProperty("cloudClicked",true)
}if(this.isInstitutional()){f(".edu-user-type-institutional").show();
f(".edu-user-type-personal").hide()
}else{f(".edu-user-type-institutional").hide();
f(".edu-user-type-personal").show()
}}else{if(k==="check"){f(".edu-cloudaccess-button-unlogged, .edu-cloudaccess-button-entitled").hide();
f(".edu-cloudaccess-button-logged").show()
}}};
e.prototype.onWebServicesError=function(l,k){var p=f(".horizon"),o='<div class="js-asset">';
if(this.i18n.hasOwnProperty("adsk-education-dropdown-error-message-"+k.toLowerCase())){o+=this.i18n["adsk-education-dropdown-error-message-"+k.toLowerCase()]
}else{o+=this.i18n["adsk-education-dropdown-error-message"];
if(k!==""){o+='<p><i class="wd-font-12 wd-color-gray-80">'+k+"</i></p>"
}}o+="</div>";
p.find(".bd").children().remove();
p.find(".bd").append('<div class="edu-error-message wd-mb-32">'+this.i18n["adsk-education-dropdown-error-header"]+'</div><div class="edu-error-body"'+o+"</div>");
if(!this.lightboxInstance){var n='<h4><a href="#0" class="edu-dropdown-lightbox-close-link">';
n+=this.i18n["adsk-education-dropdown-error-close"];
n+="</a>";
p.find(".bd").after(n);
this.lightboxInstance=new b({content:".horizon",onClose:this.hideWebServicesError,customClass:"edu-dropdown-lightbox-container",padding:24,classNames:{closeButton:"edu-dropdown-lightbox-close",closeLink:"edu-dropdown-lightbox-close-link"},closeTriggers:function(q){return["."+q.classNames.closeButton,"."+q.classNames.closeLink]
},templates:{innerContainer:function(q){return'<div id="'+q.lightboxTargetId+'" class="'+q.classNames.innerContainer+' wd-bg-white"></div>'
},closeButton:function(q){return'<a href="#0" class="'+q.classNames.closeButton+' wd-no-underline"><svg class="icon-svg-close" viewBox="0 0 32 32"><use xlink:href="#icon-svg-close"></use></svg></a>'
}}})
}this.lightboxInstance.open();
try{analytics.context.changeContext({event:{eventType:"edu_error"},error:{errorType:"edu download failed",errorDetails:[{errorCode:k,errorReason:"",errorMessage:""}]}})
}catch(m){}};
e.prototype.hideWebServicesError=function(){f(".edu-dropdown-lightbox-container").find(".bd").html("")
};
e.prototype.onWebServicesComplete=function(){var k=this;
this.enableVersionSelector();
this.languageSelector.attr("disabled",false);
this.osSelector.attr("disabled",false);
this.licenseSelector.attr("disabled",false);
this.loadingSpinner.css("display","none");
adsk.webSDK.loadSdk(function(){k.setDownloadButtonEnabled(true)
})
};
e.prototype.onWebServicesSuccess=function(m,k){var l=this;
if(k.state!=="Sucess"){k.errorCode=k.errorCode||"";
this.onWebServicesError(k.state,k.errorCode)
}else{this.serialNumber=k.serialNumber;
try{analytics.context.changeContext({event:{eventType:"edu_product_options_selected"},products:[{productLocation:"edu",productLicenseType:l.selectedLicense,productKey:l.selectedRelease.productKey,productLanguages:[l.selectedLanguage],productPlatform:l.selectedOs,productSerialNumber:k.serialNumber}]})
}catch(n){}adsk.webSDK.loadSdk(function(){var p=l.getReleaseData(l.selectedRelease,l.selectedLanguage,l.selectedOs);
if(p.hasOwnProperty("downloadNowBytes")){var o=g(p.downloadNowBytes);
l.fileSizeLabel.html(o);
l.fileSizeLabel.parent().show()
}else{l.fileSizeLabel.parent().hide()
}l.productSeatsLabel.html(l.productSeatsLabel.attr("data-label-"+l.selectedLicense));
l.productSeatsLabel.parent().show();
l.serialNumberLabel.html(l.serialNumber);
l.productKeyLabel.html(m.productKey);
f(".edu-button-unlogged").hide();
f(".edu-button-logged").show();
if(l.stepTwoAnalyticsCallback&&typeof(l.stepTwoAnalyticsCallback)==="function"){try{l.stepTwoAnalyticsCallback(l.userProfile.eidmGuid,l.serialNumber,m.productKey)
}catch(q){}}})
}};
e.prototype.setStepTwoComplete=function(k){var m;
var l=this;
if(k){this.versionSelector.attr("disabled",true);
this.languageSelector.attr("disabled",true);
this.osSelector.attr("disabled",true);
this.licenseSelector.attr("disabled",true);
adsk.s.ApplicationName="segment";
adsk.s.ApplicationStep="2";
m=this.getReleaseData(this.selectedRelease,this.selectedLanguage,this.selectedOs);
m.sku=this.selectedRelease.sku||"";
m.productKey=this.selectedRelease.productKey||"";
m.license=this.selectedLicense||"";
this.loadingSpinner.css("display","block");
m.pageLocale=document.documentElement.lang;
if(m.pageLocale.indexOf("-")>-1){m.pageLocale=m.pageLocale.replace("-","_")
}f.ajax("/services/adsk/c/oxygen/webservice",{dataType:"json",data:{productReleaseName:this.selectedRelease.title,productName:m.displayName,productSKU:m.sku,productKey:m.productKey,locale:m.pageLocale,deplyomentType:m.license,personalEmailTemplate:"new"},error:function(o,n,p){l.onWebServicesError("Failure",n)
},timeout:30000,success:function(n){l.onWebServicesSuccess(m,n)
},complete:function(){l.onWebServicesComplete()
}})
}else{this.setDownloadButtonEnabled(false);
f(".edu-button-unlogged").show();
f(".edu-button-logged").hide()
}};
e.prototype.setDownloadButtonEnabled=function(n){var p;
if(n){adsk.s.ApplicationName="segment";
adsk.s.ApplicationStep="2";
this.disabledButton.hide();
this.enabledButton.show();
p=this.enabledButton.attr("id")+"-inner";
this.enabledButton.html('<div id="'+p+'"></div>');
var m=this.getReleaseData(this.selectedRelease,this.selectedLanguage,this.selectedOs);
var l=this.i18n.sdkLocale||"en-US";
var o=this;
var k=this.getDlmData(this.selectedRelease,this.selectedLanguage,this.selectedOs);
k.done(function(t){var w=adsk.webSDK.utils.getDownloadNowParams(m,t);
if(o.selectedLicense==="standalone"){var u=adsk.webSDK.utils.getWebInstallParams(m,o.wiData,true,true,false,true,o.serialNumber)
}var q=o.createEsdArg(m);
var v=adsk.webSDK.browserDownload;
var s=f.proxy(o,"onAnalyticsCallback");
var r=m.eulaId;
fxSplitButton_v4(l,p,w,u,q,v,s,r);
o.clickCatcher.show();
f(".sdk-button-enabled.edu-button-logged").addClass("wd-button");
f(".sdk-button-enabled.edu-button-logged").addClass("pc-brand")
}).fail(function(s,q,r){console.log("Error encountered trying to get download now data");
console.log("Error message: "+r)
})
}else{this.disabledButton.show();
this.enabledButton.html("");
this.enabledButton.hide();
this.clickCatcher.hide()
}};
e.prototype.getDlmData=function(m,k,p){var o="/services/trialDownload/c/downloadNowData.json";
var l=o+"/"+k+"/"+p+this.adlmPath+"/"+m.productname+"/"+m.name;
var n={url:l,dataType:"json"};
return f.ajax(n)
};
e.prototype.onHelp=function(k){openVirtualAgent(k.data.startContext,k.data.entry);
k.preventDefault()
};
e.prototype.onAnalyticsCallback=function(m,k){var l;
try{switch(k){case cbAnalyticsReturn.IN:l=1;
break;
case cbAnalyticsReturn.DN:l=2;
break;
case cbAnalyticsReturn.BD:l=3;
break;
case cbAnalyticsReturn.HMDIN:l=3.1;
break;
case cbAnalyticsReturn.HMDDN:l=3.2;
break;
case cbAnalyticsReturn.HMDBD:l=3.3;
break;
default:return
}analytics.context.changeContext({event:{eventType:"edu_product_download"},products:[{productInstallMethod:l}]})
}catch(n){}};
function c(l,k,n,m,o){if(o&&typeof(o)==="function"){o(l,k,n,m)
}}e.prototype.onVersionChanged=function(k){this.setSelectedRelease(k.target.value)
};
e.prototype.onLanguageChanged=function(k){this.setSelectedLanguage(k.target.value)
};
e.prototype.onOsChanged=function(k){this.setSelectedOs(k.target.value)
};
e.prototype.onLicenseChanged=function(k){this.setSelectedLicense(k.target.value)
};
e.prototype.onSignInClicked=function(k){adsk.oxygen.openByUser=true;
adsk.oxygen.signInClick();
k.preventDefault()
};
e.prototype.onCreateAccountClicked=function(k){try{adsk.oxygen.openByUser=true;
adsk.oxygen.openIFrame("register","lang="+document.documentElement.lang)
}catch(l){}k.preventDefault()
};
e.prototype.onLogOutClicked=function(k){this.clearClientContext();
this.sso.signOut();
this.setStepOneComplete(false);
f(document).trigger("adsk.ui.educationalDownload.userLogout");
k.preventDefault()
};
openVirtualAgent=function(l,m){var k="http://autodesk.creativevirtual15.com/autodesk/bot.html?isJSEnabled=1&businessArea=Root.Education";
if(l){k+="&startContext="+escape(l)
}if(m){k+="&entry="+escape(m)
}window.open(k,"AutodeskVirtualAssistant","width=581,height=552")
};
e.prototype.onToggleClick=function(k){var l=f(k.target);
if(l.hasClass("icon-show")){l.removeClass("icon-show").addClass("icon-hide");
l.parent().find(".edu-button-infotext").show()
}else{l.removeClass("icon-hide").addClass("icon-show");
l.parent().find(".edu-button-infotext").hide()
}k.preventDefault()
};
var i=function(k,l){if(k.hasOwnProperty("entitlement")&&k.entitlement.length>0){for(idx in k.entitlement){if(k.entitlement[idx]==l){return true
}}}return false
};
var g=function(l){var k=Math.floor(Math.log(l)/Math.log(1024));
return(l/Math.pow(1024,k)).toFixed(2)*1+" "+["B","kB","MB","GB","TB"][k]
};
e.prototype.isInstitutional=function(){return i(this.userProfile,"school")
};
e.prototype.isPersonal=function(){return !i(this.userProfile,"school")||i(this.userProfile,"personal")
};
e.prototype.allowedType=function(k){if(k===this.MULTI_SEAT_STANDALONE_LICENSE&&this.isInstitutional()){return true
}if(k===this.NETWORK_LICENSE&&this.isInstitutional()){return true
}if(k===this.STANDALONE_LICENSE&&(i(this.userProfile,this.PERSONAL_ENTITLEMENT)||!this.userProfile.hasOwnProperty(this.ENTITLEMENT))){return true
}return false
};
e.prototype.clearClientContext=function(){this.clientContext.removeProperty("selectedLicense");
this.clientContext.removeProperty("selectedRelease");
this.clientContext.removeProperty("selectedOs");
this.clientContext.removeProperty("selectedLanguage");
this.clientContext.removeProperty("cloudClicked")
};
function a(m,l,o,n,k){MktoForms2.loadForm(m,o,l,function(p){p.onSuccess(function(){return false
});
p.addHiddenFields({activityName:n,countryISOCode:k.country});
p.vals({Email:k.email,FirstName:k.firstname,LastName:k.lastname});
p.submittable(true);
p.submit()
})
}return e
});
function productReleaseForCloudAccess(thisElem){var productField=thisElem.findParentByType("dialog").getField("./productPath");
var productReleaseField=thisElem.findParentByType("dialog").getField("./productReleaseForCloudAccess");
var resultJSON=CQ.HTTP.eval(CQ.HTTP.noCaching("/libs/autodesk/product-catalog-service.json?qp=prod_rel&p="+CQ.HTTP.encodePath(productField.getValue())));
if(resultJSON.status=="SUCCESS"){if(resultJSON.result.length>0){productReleaseField.setOptions(resultJSON.result);
productReleaseField.setValue(resultJSON.result[0].value)
}return CQ.Util.formatData(resultJSON.result)
}};